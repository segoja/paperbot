<HeadLayout />
<header class="m-0 p-0">
  <BsNavbar
    @type="dark"
    class="px-3 my-0 py-1"
    @backgroundColor="dark"
    @collapsed={{true}}
    @fluid={{true}}
    @position="fixed-top"
    @toggleBreakpoint="sm"
    @onCollapse={{fn (mut this.collapsed) true}}
    @onExpand={{fn (mut this.collapsed) false}} as |navbar|>

      <div class="navbar-header">
        {{navbar.toggle}}
        <LinkTo @route="application" class="navbar-brand my-0 py-0">Paperbot <span>{{svg-jar "papercat-gray-icon" class="logo" }}</span></LinkTo>{{this.loadConfig}}
      </div>     
      <navbar.content>
        <navbar.nav class="ml-auto" as |nav|>
          <nav.item>
            <nav.link-to @route="streams.index">Streams</nav.link-to>
          </nav.item>
          <nav.item>
            <nav.link-to @route="commands.index">Commands</nav.link-to>
          </nav.item>
          <nav.item>
            <nav.link-to @route="clients.index">Clients</nav.link-to>
          </nav.item> 
          <nav.dropdown class={{if this.headData.darkMode "bg-dark"}} as |dd| >
            <dd.toggle><FaIcon @icon="cog" /> Settings <span class="caret"></span></dd.toggle>
            <dd.menu class={{if this.headData.darkMode "bg-dark"}} as |ddm|>            
              <ddm.item>
                <ddm.link-to @route="settings.index" class="font-weight-bold"><h6>Change Settings <FaIcon @icon="wrench" /></h6></ddm.link-to>
              </ddm.item>
              <ddm.item>
                <hr class="dropdown-divider">
              </ddm.item>
              <ddm.item>
                <span role="button" class="dropdown-item {{if this.headData.darkMode "bg-dark"}}" {{on "click" this.handleExport}}>Export Database</span>
              </ddm.item>
              <ddm.item>
                <FileUpload @name="uploadfile" @accept="file/json" @onfileadd={{fn this.handleImport}} hidden={{false}} class="my-0" ><span class="dropdown-item {{if this.headData.darkMode "bg-dark"}}">Import Database</span></FileUpload>
              </ddm.item>
              <ddm.item>
                <span role="button" class="dropdown-item {{if this.headData.darkMode "bg-dark"}}" {{on "click" this.wipeDatabase}}>Wipe DB</span>
              </ddm.item>
            </dd.menu>
          </nav.dropdown>
          <nav.item>
            <span role="button" {{on "click" this.toggleMode}} class="nav-link {{if this.headData.darkMode "bulboff" "bulbon active"}}" title="{{if this.headData.darkMode "Dark mode" "Light mode"}}">
              <FaIcon @icon="{{if this.headData.darkMode "lightbulb" "lightbulb"}}" />
            </span>
          </nav.item>           
        </navbar.nav>
      </navbar.content>
  </BsNavbar>
</header>
<main role="main" class="container-fluid pt-5 px-0">
  {{outlet}}
</main>