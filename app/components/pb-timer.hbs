<div class="card">
  <div class="card-header bg-dark bg-gradient p-0 m-0 border-0 rounded-top">
    <div class="row g-0">
      <div class="col py-1 ps-3"><span class="h5 text-white">{{@timer.name}}</span></div>
      <div class="col-auto">
        <button type="button" class="btn btn-dark rounded-0 rounded-top-right border-0" {{on "click" @closeTimer}}><FaIcon @icon="times" /></button>
      </div>
    </div>
  </div>
  <div class="card-body">
    <BsForm @formLayout="horizontal" @model={{@timer}} @onSubmit={{@saveTimer}} as |form|>
      <form.element @controlType="text" @label="Name" class="pb-2" placeholder="Type the timer name" @property="name" required /> 
      <form.element @controlType="power-select" @property="type" @label="Type" class="pb-2" @options={{@timerTypes}} as |element| >
        <element.control placeholder="Select the timer type" @allowClear={{true}} />
      </form.element>
      <div class="form-group row pb-2">
        <label class="col-md-4">Active</label>
        <div class="col-sm">
          <form.element @controlType="checkbox" @label="" @formLayout="inline" class="form-check form-check-inline ps-0" @property="active" />
        </div>
      </div>
      {{!-- 
        <div class="form-group row pb-2">
          <label class="col-md-4">Chat lines interval</label>    
          <div class="col-sm">
            <div class="input-group bg-light border rounded">
              <Input @type="range" min="5" max="50" @value={{@timer.chatlines}}  class="form-control slider w-75 border-0" />
              <div class="input-group-append w-25">
                <Input @type="text" @value={{@timer.chatlines}} class="form-control border-0" />
              </div>
            </div>
          </div>
        </div>  
        <div class="form-group row pb-2">
          <label class="col-md-4">Time (minutes)</label>    
          <div class="col-sm">
            <div class="input-group bg-light border rounded">
              <Input @type="range" min="1" max="60" @value={{@timer.time}}  class="form-control slider w-75 border-0" />
              <div class="input-group-append w-25">
                <Input @type="text" @value={{@timer.time}} class="form-control border-0" />
              </div>
            </div>
          </div>
        </div>
      --}}
      <div class="form-group row pb-2">
        <label class="col-md-4">Message:</label>    
        <div class="col-sm">
          <Textarea @value={{@timer.message}} placeholder="Type the timer message..." rows="4" class="form-control"/>
        </div>
      </div>
      <form.element @controlType="text" @property="soundfile" class="pb-2" @label="Sound file" as |el|>
        <div class="input-group">
          <div class="input-group-prepend">
            <BsButton @type="secondary" @onClick={{fn (if this.isPlaying this.stopSound this.playSound)}}><FaIcon @icon="{{if this.loadPreview (if this.isPlaying "stop" "play") "volume-mute"}}" /></BsButton>
          </div>
          <el.control disabled class="border-form-control" @placeholder="Select the sound file..." />
          <div class="input-group-append">
            <BsButton @type="secondary" @onClick={{fn this.getAudioPath @timer}}>Select file</BsButton>        
          </div>
        </div>
      </form.element>
      <div class="form-group row pb-2">
        <label class="col-md-4">Volume %:</label>    
        <div class="col-sm">
          <div class="input-group bg-light border rounded">
            <Input @type="range" min="1" max="100" @value={{@timer.volume}}  {{on "change" (fn this.adjustVolume @timer.volume)}} class="form-control slider border-0 w-75" />
            <div class="input-group-append w-25">
              <Input @type="text" @value={{@timer.volume}} {{on "keyup" (fn this.adjustVolume @timer.volume)}} class="form-control border-0" />
            </div>
          </div>
        </div>
      </div>
      
      <BsButton @type="success" @onClick={{@saveAndReturnTimer}}><FaIcon @icon="save" /> Save & Return</BsButton> 
      <BsButton @type="secondary" @onClick={{this.doneEditing}}><FaIcon @icon="save" /></BsButton>
      <div class="text-success ms-2 {{if this.saving "d-inline-block fadeout" "d-none"}}"><FaIcon @icon="spinner" class={{if this.saving "spin"}} /> <span>Timer saved!</span></div>
      <ButtonConfirm @btnClass="btn btn-danger float-end" @btnIcon="trash" @btnText="Delete" @confirmDescription="Are you sure you want to delete this timer?" @targetAction={{fn @deleteTimer}} />
    </BsForm>
  </div>
</div>